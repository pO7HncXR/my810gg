---
title: "Безопасность серверов Minecraft | Часть 1; Осведомленность"
date: 2023-01-11T11:30:04+03:00
draft: false
# tags: ["html", "css"]
categories: ["Безопасность"]
---

Обширная серия статей, объясняющих, почему серверы Minecraft взламывают, и что вы можете сделать, чтобы предотвратить это. В этой статье будет рассказано о нескольких вещах, которые почти всегда показывают в тех классических видео на YouTube, где серверы взламываются. Я подробно объясню, почему это происходит, как это происходит и что вы можете сделать, чтобы предотвратить это. Этот пост предназначен для всех; от разработчиков плагинов до системных администраторов и профессионалов.

В кибербезопасности вы должны спрашивать себя не о том, _взломают ли_ вас, а _когда_.

### Вступление
Я пишу это, потому что слишком часто вижу взломы серверов. Это само по себе, хоть и проблематично, но не заставляет волноваться. Что меня тревожит, так это то, как и почему их взламывают. По этой причине я пишу эту серию статей по безопасности, чтобы привлечь всеобщее внимание. Обратите внимание, что это руководство не относится к Minecraft; это разработка программного обеспечения и системное администрирование в целом. Это первая часть в серии.

### Осведомленность
Будьте максимально честны с собой. У вас, скорее всего, что-то работает; скорее всего сервер Minecraft. Вы когда-нибудь сидели в течение достаточно долгого времени и думали о том, насколько безопасна ваша сеть? Как его можно взломать, и что произойдет, если вас взломают, и как вы справитесь со взломом? Скорее всего, вы недостаточно об этом подумали. Вот где возникает первая проблема. Если вы думали об этом, поздравляю, вы на правильном пути.

К сожалению, многие люди не осознают, что отсутствие внимания к безопасности приведет к угрозам безопасности. Это неизбежно; если вы активно не думаете о безопасности при создании или обслуживании своей сборки, вы, скорее всего, создадите риски. Кто-то может злоупотреблять этими рисками, что может привести к утечке ваших самописных плагинов, краже личных данных игроков, компрометации сервера Discord и т. д.

### Оценка ситуации
Первым шагом в этом является начало оценки. Посмотрите на всю вашу сборку и изучите, как именно вещи интегрированы друг с другом. Какие вещи связаны, какие общие службы или базы данных? Это важно знать для следующего пункта. При выполнении этой оценки создайте схему того, как все работает и как все связано. Для этого можно использовать диаграмму компонентов UML или любую другую диаграмму/рисунок, который вам подходит. Мы должны понимать, как различные части нашей системы интегрируются с другими частями, чтобы мы могли понять, какое влияние оказывает конкретная угроза безопасности.

**Цепочка эксплойтов**

Причина, по которой мы это делаем, объясняется далее в части 2; цепочка эксплойтов. Не слишком спойлеря, все сводится к тому, что один эксплойт вызывает другой. Незначительная брешь в системе A может привести к брешь в системе B, C, D и т. д. Это то, чего многие люди просто не осознают. Прекрасным примером является система разрешений. Многие администраторы, которые настраивают сервер Minecraft, будут думать, что определенная функциональность безопасна, потому что она заблокирована разрешением. Это верно до тех пор, пока вы не обнаружите, что вы неправильно настроили BungeeCord, и кто-то может просто выдать себе OP. В этот момент ваши права больше ничему не препятствуют, и тот факт, что ваше соединение Bungee было нарушено (первоначальный эксплойт), теперь приводит к дальнейшим эксплойтам (цепные эксплойты).

Это то, что я называю цепочкой эксплойтов, более официально называемой латеральным движением, о которой я подробно расскажу во второй части.

**Пример**

Ниже приведен пример. У нас есть классический сервер Minecraft с настройкой BungeeCord, тремя различными игровыми режимами (фракции, город и скайблок). Он состоит из баз данных, ссылки на интернет-магазин (Tebex) и синхронизации Discord (DiscordSRV). Я полагаю, что это настолько общая установка, насколько можно себе представить. Любые советы или дополнения к этому, обязательно предложите их ниже.

Давайте посмотрим на изображение ниже, как вещи связаны в этом сценарии (скорее всего!);
![sg1-01](https://user-images.githubusercontent.com/122451613/211928659-2891023e-eb55-4dab-8b30-a5c9116682ec.png)
У нас есть BungeeCord, подключенный ко всем серверам Spigot. Все серверы Spigot также подключены к одному и тому же серверу базы данных и одной и той же базе данных (например, база данных MySQL). Они также подключены к EasyDonate и Discord. Для этого раздела предположим, что и Discord, и Tebex максимально интегрированы; синхронизированная консоль с Discord и возможность управлять своим магазином из игры в EasyDonate. Мы предполагаем это, потому что я считаю, что это наиболее распространено.

Теперь я хочу, чтобы вы взяли это изображение и вставили его в [Paint](https://paint.js.org/) или любой другой графический редактор. Я хочу, чтобы вы нарисовали красным крестом (двойной линией) соединения, которых вообще не должно быть, и одной красной линией соединения, которые следует изменить (интеграции или функциональные возможности, которые следует отключить).

### Осознание
![sg1-02](https://user-images.githubusercontent.com/122451613/211930306-241a324c-2ece-4692-aa6b-d2d319e0365f.png)
Погоди, я уже вижу, как ты разминаешь свои ручонки, готовясь выложиться по полной мне в личные сообщения Telegram или VK. Но подождите, давайте внимательно посмотрим на это. Здесь приходит осознание.

Посмотрите на эти функции и подумайте, какая из них необходима. Это может отличаться для всех; один человек может иметь больше возможностей для индивидуальной разработки по сравнению с другими. Однако суть остается; оба должны пересматривать вещи и задаваться вопросом, должны ли все работать таким образом.

**Менталитет счастливого потока**

Многие люди настроят свой сервер Minecraft в соответствии со стратегией счастливого потока. Они начнут что-то настраивать, и как только это сработает, они остановятся. Он работает, он работает, у вас есть игроки, ваша работа выполнена. Верно? Нет. Мы все (по крайней мере, я надеюсь) знаем о классическом "эксплоите" BungeeCord, когда игроки могут напрямую подключаться к вашему серверу Spigot через поддельный прокси-сервер Bungee, если вы не установили брандмауэр должным образом. Какой бы смехотворно старой ни была эта техника, она все еще работает даже сегодня. Это должно доказать вышеупомянутый менталитет множества людей.

Проблема в том, что самая очевидная и прямая настройка обычно не самая лучшая (или, по крайней мере, не самая безопасная). Подумайте о том, что я упоминал ранее о вашей проблеме с правами и о том, что вы были _взломаны_ через эксплоит BungeeCord . Вы можете подумать, что с некоторыми правами все в порядке. Вы оставляете функцию включенной, но прячете ее за разрешением. Это работает, у вас есть игроки, все в порядке. Пока что. Пока вы не получите эксплоит Bungee, и все ваши права не будут обойдены.

Это касается всего, что вы можете делать на своем сервере Minecraft; управлять своим сервером Discord, получать доступ к личным данным пользователя, читать личные данные из вашего интернет-магазина, изменять свой интернет-магазин, выполнять SQL-запросы или читать файлы с диска (да, некоторые плагины достаточно глупы, чтобы иметь такую ​​функциональность).

**Плагины Spigot**
Хотя Spigot прекрасен из-за механизма плагинов, он представляет большой риск. Spigot отлично подходит для моддинга благодаря плагинам. Но давайте задумаемся об этом на секунду. Плагин, что это такое? В некотором смысле это просто некоторый код, который _автоматически_ выполняется каким-то другим кодом. По определению, это очень рискованно. _Весь_ взлом в значительной степени сводится к тому, чтобы заставить машину делать то, что вы хотите. Некоторые более неожиданны или сложны, чем другие, но все сводится к одному и тому же. Тот факт, что плагин, в конце концов, представляет собой не что иное, как автоматически вызываемый код, является рискованным. Вы, как разработчик и администратор, должны учитывать это. Почему вы должны учитывать это при наличии разработчика, объясняется в следующих частях. Вы всегда должны быть осторожны с плагинами, которые вы устанавливаете.

Также обратите внимание, что вредоносное ПО может распространяться! Если вы не настроите свои права должным образом, один плагин может просто записать другой файл Jar, эффективно переместив код вредоносного ПО в новый Jar, что может помочь скрыть его злые намерения.

Это рискованно не только с точки зрения кода, но и с точки зрения конфигурации и данных. Подробнее об этом в частях 2, 3, 4 и 5.

### Итог
Эта первая часть может быть немного пугающей, но это потому, что я хочу повысить осведомленность, и это итог для первой части. Посмотрите на свои сборки и, самое главное, будьте честны с собой. Просмотрите свой стек технологий, как все они интегрированы друг с другом, и спросите себя, действительно ли они вам нужны. Не используйте что-то просто так; используйте его, потому что он вам действительно нужен. Ни одна душа на этой планете не нуждается в синхронизации своей консоли Minecraft с сервером Discord. Я заплачу тебе 100 вечно зеленых, если ты сможешь убедить меня в обратном.

Далее; Часть 2; Цепочка эксплойтов